# 画像閲覧プロキシ機能の実装完了

## 概要
Googleアカウントにログインしていない端末（会社用スマホなど）でも Google Drive 上の写真を閲覧可能にするため、GASを経由した画像プロキシ機能を実装しました。
また、未使用ファイル (`src/gas/Index.html`) の削除整理も行いました。

## 実装内容
### 1. GAS側 (`src/gas/Code.gs`)
- **Webアプリ (`doGet`) の改修**: `mode=image` パラメータを受け付ける分岐を追加しました。
- **画像取得ロジック (`serveImage`)**: Google Driveから画像を取得し、Base64データとして埋め込んだHTMLページを生成して返す機能を追加しました。
    - これにより、Google Driveへの直接リンク（要認証）ではなく、GASアプリへのアクセス（公開アプリとしてデプロイすれば認証不要）で画像が見れます。

### 2. フロントエンド側 (依頼用・作業用ファイル)
以下の2ファイルに同様の修正を適用しました。
- `src/gas/IndexRequest.html`
- `src/gas/IndexWorker.html`

**主な修正点:**
- **スクリプトURLの注入**: GASテンプレート機能を利用し、自分自身のWebアプリURL (`SCRIPT_URL`) を埋め込みました。
- **閲覧リンクの変更**: 写真ボタンをクリックした際、`openImageProxied` メソッドを経由するようにしました。
    - このメソッドは、`SCRIPT_URL + '?mode=image&id=ファイルID'` のURLを新しいタブで開きます。

### 3. ファイル整理
- `src/gas/Index.html` (開発用残骸) を削除しました。

## デプロイと検証手順
以下の手順でデプロイを行い、動作確認をお願いいたします。

1.  **デプロイ**: GASエディタから「新しいデプロイ」を実行し、Webアプリとして公開してください。
2.  **動作確認**:
    *   会社用スマホ等で、依頼用または作業用URLを開いてください。
    *   「写真」ボタンをクリックしてください。
    *   Googleのログイン画面が出ることなく、画像が表示されれば成功です。

## 注意点
- 画像は閲覧時にその都度GASサーバーから取得されるため、アプリの初期読み込み速度には影響しません。
