# バージョン管理

## 現在のバージョン
**v1.0.0**

## 更新履歴
- **2026-01-20: dev1.0.0.20260120.6**
  - **GAS同期設定**: `clasp` を導入し、ローカル環境から GAS への push/pull が可能になるよう設定。

- **2026-01-19: v1.0.0**
  - **正式リリース**: UI改善版を本番環境へ統合。
  - **依頼担当者機能**: `config`シートE列から担当者リストを読み込み、新規登録時にセレクトボックスで選択可能に。
  - **ステータス同期**: トップ画面の「本日の更新内容」の状態（黄/青/赤）を共有・自動判定（`config`シートD列使用）。
  - **DB拡張**: `requester`（依頼担当者/P列）と`receiver`（受取担当者/Q列）を追加。
  - **住所リスト修正**: 地区選択時に住所リストが正しく切り替わるよう修正。
- **2026-01-19: dev1.0.0.20260119.1**
  - UI改善のための静的モックアップ `index-ui.html` を作成。
  - デザインの反復開発を効率化。
- **2026-01-16: dev1.0.0.20260116.1**
  - 画像アップロード時のリサイズ機能を追加（最大幅1280px、品質80%）。
  - 画像アップロードを楽観的UI方式に変更（モーダル即閉じ、裏処理）。
  - 地区別住所リスト機能を追加（configシート構成: A=地区, B=住所, C=担当者）。
  - スマホカメラの高解像度画像を圧縮してアップロード時間を短縮。
- **2026-01-15: dev1.0.0.20260115.3**
  - スプレッドシート ID (1ZFpJtwe...) を `Code.gs` に設定。
  - 実運用に向けたバックエンド接続設定の完了。
- **2026-01-15: dev1.0.0.20260115.2**
  - Webアプリ環境での2重起動防止（シングルインスタンス）ロジックを実装。
  - BroadcastChannel を用いたタブ間通信による警告表示。
- **2026-01-15: dev1.0.0.20260115.1**
  - 初回実装。
  - Google Apps Script (GAS) 向けの `Code.gs` および `Index.html` を作成。
  - プレミアムUI（グラスモーフィズム）を採用。
  - 認証機能、タブ切り替え、案件編集機能を実装。

## バージョン定義箇所
- `package.json`: 1.0.0
- `src/gas/Code.gs`: `const VERSION = 'dev1.0.0.20260115.1'` (コメント内)
- `src/gas/Index.html`: 表示用テキスト、セッション管理タグ等
- `docs/kagi-task-development/walkthrough.md`

## 2重起動回避 (Single Instance) 管理
- **実装方法**: `BroadcastChannel` (ID: `kagi_task_single_instance`)
- **対象ファイル**:
  - `index.html`: `mounted()` ライフサイクルおよびスクリプト冒頭で、他タブの存在を確認しログまたはアラートを出力。

